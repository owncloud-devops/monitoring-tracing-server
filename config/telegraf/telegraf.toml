[agent]
collection_jitter = "0s"
debug = false
flush_interval = "10s"
flush_jitter = "0s"
interval = "10s"
logfile = ""
logtarget = "stderr"
metric_batch_size = 1000
metric_buffer_limit = 10000
omit_hostname = false
precision = ""
quiet = false
round_interval = true

hostname = "${HOSTNAME}"

#[global_tags]
#project = "product"

[[outputs.prometheus_client]]
collectors_exclude = [
  "gocollector",
  "process",
] # disable telegraf metrics
listen = "0.0.0.0:9273"
metric_version = 2

[[inputs.docker]]
endpoint = "unix:///var/run/docker.sock"
perdevice = true
timeout = "5s"
total = true

[[inputs.prometheus]]
metric_version = 2
urls = [
  "http://prometheus:9090/metrics",
]

[[inputs.cpu]]
collect_cpu_time = false
percpu = true
report_active = false
totalcpu = true

[[inputs.disk]]
#ignore_fs = ["tmpfs", "devtmpfs", "devfs", "iso9660", "overlay", "aufs", "squashfs"]
ignore_fs = ["tmpfs", "devtmpfs", "overlay", "aufs", "squashfs"]
[inputs.disk.tagdrop]
path = [
  "/etc/telegraf/telegraf.conf",
  "/etc/hostname",
  "/etc/hosts",
  "/etc/resolv.conf",
  "/boot/*",
]

[[inputs.diskio]]

[[inputs.kernel]]

[[inputs.mem]]

[[inputs.processes]]

[[inputs.swap]]

[[inputs.system]]

[[inputs.conntrack]]

[[inputs.netstat]]

[[inputs.kernel_vmstat]]

[[inputs.linux_sysctl_fs]]

[[inputs.procstat]]
pattern=".*"
pid_finder = "native"

[[inputs.net]]
#ignore_protocol_stats = false
#interfaces = ["eth*"]

[[inputs.elasticsearch]]
  servers = ["http://elasticsearch:9200"]
